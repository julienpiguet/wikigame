<!DOCTYPE html>
<html>

<head>
    <title>Wikigame</title>
</head>

<body>
    <form id="create" action="">
        <button>Create</button>
    </form>
    <form id="leave" action="">
        <button>Leave</button>
    </form>
    <form id="start" action="">
        <button>Start</button>
    </form>
    <form id="join" action="">
        <input id="input" autocomplete="off" /><button>Join</button>
    </form>
    <ul id="log"></ul>
    <span id="timer"></span>
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io();


    var create = document.getElementById('create');
    var leave = document.getElementById('leave');
    var start = document.getElementById('start');
    var timer = document.getElementById('timer');
    var join = document.getElementById('join');
    var input = document.getElementById('input');

    join.addEventListener('submit', function (e) {
        e.preventDefault();
        if (input.value) {
            socket.emit('join', input.value);
            input.value = '';
        }
    });
    create.addEventListener('submit', function (e) {
        e.preventDefault();
        socket.emit('create');
    });
    start.addEventListener('submit', function (e) {
        e.preventDefault();
        socket.emit('start');
    });
    leave.addEventListener('submit', function (e) {
        e.preventDefault();
        socket.emit('leave');
    });

    var log = document.getElementById('log');
    socket.on('log', function (msg) {
        var item = document.createElement('li');
        item.textContent = msg;
        log.appendChild(item);
    });

    socket.on('err', function (msg) {
        var item = document.createElement('li');
        item.textContent = msg.message;
        item.style.color = "red"
        log.appendChild(item);
    });

    socket.on('timer', (time) => {
        timer.textContent = time;
    })
</script>

</html>